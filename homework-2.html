<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Homework 2 — Distributions & Caesar Cipher</title>
  <link rel="stylesheet" href="style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <style>
    /* Fixed CSS for better visualization - no more overlapping */
    .hw-section {
      background: rgba(30,44,74,0.95);
      border-radius: 16px;
      margin: 2rem 0;
      padding: 2rem;
      box-shadow: 0 8px 32px rgba(24,224,230,0.15);
      overflow: visible;
    }
    
    .step-container {
      background: rgba(20,32,66,0.6);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      border-left: 4px solid #18e0e6;
      overflow: visible;
    }
    
    .step-title {
      color: #18e0e6;
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .step-number {
      background: #18e0e6;
      color: #0a1628;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: bold;
    }
    
    .explanation {
      background: rgba(15,25,55,0.7);
      border-radius: 8px;
      padding: 1.25rem;
      margin: 1rem 0;
      border-left: 3px solid #4a9eff;
      font-size: 0.95rem;
      line-height: 1.6;
    }
    
    .result-box {
      background: rgba(12,20,45,0.8);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      border: 1px solid #2d4a7a;
      overflow: visible;
      min-height: auto;
    }
    
    .controls-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin: 1.5rem 0;
    }
    
    .control-group {
      background: rgba(15,25,55,0.5);
      padding: 1.25rem;
      border-radius: 8px;
    }
    
    .control-group label {
      display: block;
      margin-bottom: 0.75rem;
      color: #b8d4ff;
      font-weight: 500;
    }
    
    .control-group input,
    .control-group select,
    .control-group textarea {
      width: 100%;
      padding: 0.75rem;
      border-radius: 8px;
      border: 1px solid #3a5a8a;
      background: #0f1937;
      color: #e9f2ff;
      font-family: inherit;
      box-sizing: border-box;
      font-size: 0.95rem;
    }
    
    .control-group textarea {
      font-family: 'Courier New', monospace;
      resize: vertical;
      min-height: 100px;
    }
    
    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin: 1.25rem 0;
    }
    
    .btn {
      background: linear-gradient(135deg, #18e0e6 0%, #2bd4d9 100%);
      color: #0a1628;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      display: inline-block;
      text-align: center;
      font-size: 0.95rem;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(24,224,230,0.3);
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn.secondary {
      background: linear-gradient(135deg, #4a9eff 0%, #6bb6ff 100%);
    }
    
    .btn.ghost {
      background: transparent;
      color: #18e0e6;
      border: 2px solid #18e0e6;
    }
    
    .visualization-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
      margin: 2rem 0;
    }
    
    .dual-chart-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin: 2rem 0;
    }
    
    @media (max-width: 1200px) {
      .dual-chart-container {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .visualization-container {
        grid-template-columns: 1fr;
      }
      .controls-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .chart-container {
      background: rgba(8,15,35,0.9);
      border-radius: 12px;
      padding: 1.25rem;
      min-height: 350px;
    }
    
    canvas {
      width: 100%;
      height: 320px !important;
      border-radius: 8px;
    }
    
    .data-table {
      background: rgba(8,15,35,0.9);
      border-radius: 12px;
      padding: 1.25rem;
      overflow-x: auto;
      max-height: none;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    
    th, td {
      padding: 0.6rem 0.8rem;
      text-align: left;
      border-bottom: 1px solid #2d4a7a;
    }
    
    th {
      background: rgba(24,224,230,0.1);
      color: #18e0e6;
      font-weight: 600;
      position: sticky;
      top: 0;
    }
    
    .alert {
      background: rgba(255,193,7,0.1);
      border: 1px solid #ffc107;
      color: #ffd54f;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
    }
    
    .alert.success {
      background: rgba(76,175,80,0.1);
      border: 1px solid #4caf50;
      color: #81c784;
    }
    
    html, body {
      scroll-behavior: smooth;
      overflow-x: hidden;
    }
    
    main {
      min-height: 100vh;
      overflow: visible;
    }
    
    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 1.5rem;
      margin: 2rem 0;
    }
    
    @media (max-width: 900px) {
      .comparison-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .analysis-summary {
      background: rgba(24,224,230,0.05);
      border: 2px solid #18e0e6;
      border-radius: 12px;
      padding: 1.5rem;
      margin: 2rem 0;
    }
    
    .shift-candidate {
      background: rgba(20,32,66,0.8);
      border-radius: 8px;
      padding: 1rem;
      margin: 0.5rem 0;
      border-left: 3px solid #4a9eff;
    }
    
    .shift-candidate.best {
      border-left-color: #18e0e6;
      background: rgba(24,224,230,0.08);
    }

    /* SQL Query Styles */
    .sql-container {
      background: rgba(8,15,35,0.95);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      border: 1px solid #18e0e6;
    }

    .sql-header {
      color: #18e0e6;
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .sql-icon {
      background: #18e0e6;
      color: #0a1628;
      width: 24px;
      height: 24px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.8rem;
    }

    .sql-code {
      background: #0a1628;
      border-radius: 8px;
      padding: 1rem;
      margin: 0.75rem 0;
      border-left: 3px solid #18e0e6;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      color: #e9f2ff;
      overflow-x: auto;
      line-height: 1.6;
    }

    .sql-code .keyword {
      color: #18e0e6;
      font-weight: bold;
    }

    .sql-code .function {
      color: #4a9eff;
    }

    .sql-code .string {
      color: #81c784;
    }

    .sql-code .comment {
      color: #7a8a9a;
      font-style: italic;
    }

    .sql-result {
      background: rgba(24,224,230,0.05);
      border-radius: 8px;
      padding: 0.75rem;
      margin-top: 0.5rem;
      font-size: 0.85rem;
      color: #b8d4ff;
    }

    .query-examples {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="logo">Statistics<span class="cyber">Cyber</span></div>
      <ul id="navLinks">
        <li><a href="index.html">Home</a></li>
        <li><a href="homework.html">Homework</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
      <button class="nav-toggle" id="navToggle">&#9776;</button>
    </nav>
  </header>

  <main>
    <section class="hw-detail">
      <h1>Homework 2: Distributions and the Caesar Cipher</h1>
      <p class="subtle">This assignment demonstrates statistical analysis of datasets and text cryptography through comprehensive analysis and comparison techniques.</p>

      <!-- PART A: Dataset & Distribution -->
      <div class="hw-section">
        <h2 style="color: #18e0e6; margin-bottom: 1.5rem;">Part A — Dataset and Distribution Analysis</h2>
        
        <div class="step-container">
          <div class="step-title">
            <span class="step-number">1</span>
            Understanding Concepts
          </div>
          <div class="explanation">
            <p><strong>Dataset:</strong> A structured collection of data organized in rows (observations/records) and columns (variables/attributes). In cybersecurity, this could be user login data, network traffic logs, or security incident reports.</p>
            <p><strong>Distribution:</strong> Shows how values of a variable are spread across different categories or ranges. A <em>univariate distribution</em> analyzes one variable at a time, while a <em>bivariate distribution</em> examines relationships between two variables.</p>
          </div>
        </div>

        <!-- NEW: SQL Query Examples Section -->
        <div class="step-container">
          <div class="step-title">
            <span class="step-number">1.5</span>
            MS Access SQL Queries for Distributions
          </div>
          <div class="explanation">
            Below are practical SQL examples you can execute in MS Access to compute univariate and bivariate distributions on your dataset.
          </div>

          <div class="query-examples">
            <!-- Univariate Distribution Example 1 -->
            <div class="sql-container">
              <div class="sql-header">
                <span class="sql-icon">U1</span>
                Univariate Distribution - Single Variable (Department)
              </div>
              <div class="sql-code">
<span class="keyword">SELECT</span> Department, <span class="function">COUNT</span>(*) <span class="keyword">AS</span> Frequency
<span class="keyword">FROM</span> UserSecurity
<span class="keyword">GROUP BY</span> Department
<span class="keyword">ORDER BY</span> Frequency <span class="keyword">DESC</span>;
              </div>
              <div class="sql-result">
                <strong>Purpose:</strong> Calculates the frequency distribution of the Department variable, showing how many records exist for each department.<br>
                <strong>Output:</strong> Table with Department names and their occurrence counts, sorted by frequency.
              </div>
            </div>

            <!-- Univariate Distribution Example 2 -->
            <div class="sql-container">
              <div class="sql-header">
                <span class="sql-icon">U2</span>
                Univariate Distribution - Numeric Variable with Ranges (Age Groups)
              </div>
              <div class="sql-code">
<span class="keyword">SELECT</span> 
    <span class="keyword">SWITCH</span>(
        Age &lt; 30, <span class="string">'20-29'</span>,
        Age &lt; 40, <span class="string">'30-39'</span>,
        Age &lt; 50, <span class="string">'40-49'</span>,
        Age &gt;= 50, <span class="string">'50+'</span>
    ) <span class="keyword">AS</span> AgeGroup,
    <span class="function">COUNT</span>(*) <span class="keyword">AS</span> Frequency
<span class="keyword">FROM</span> UserSecurity
<span class="keyword">GROUP BY</span> 
    <span class="keyword">SWITCH</span>(
        Age &lt; 30, <span class="string">'20-29'</span>,
        Age &lt; 40, <span class="string">'30-39'</span>,
        Age &lt; 50, <span class="string">'40-49'</span>,
        Age &gt;= 50, <span class="string">'50+'</span>
    )
<span class="keyword">ORDER BY</span> AgeGroup;
              </div>
              <div class="sql-result">
                <strong>Purpose:</strong> Groups continuous Age data into categorical ranges for frequency distribution analysis.<br>
                <strong>Output:</strong> Age ranges with count of employees in each group.
              </div>
            </div>

            <!-- Univariate Distribution Example 3 -->
            <div class="sql-container">
              <div class="sql-header">
                <span class="sql-icon">U3</span>
                Univariate Distribution with Percentages
              </div>
              <div class="sql-code">
<span class="keyword">SELECT</span> 
    MalwareDetected,
    <span class="function">COUNT</span>(*) <span class="keyword">AS</span> Frequency,
    <span class="function">FORMAT</span>(<span class="function">COUNT</span>(*) / (
        <span class="keyword">SELECT</span> <span class="function">COUNT</span>(*) <span class="keyword">FROM</span> UserSecurity
    ), <span class="string">'Percent'</span>) <span class="keyword">AS</span> Percentage
<span class="keyword">FROM</span> UserSecurity
<span class="keyword">GROUP BY</span> MalwareDetected;
              </div>
              <div class="sql-result">
                <strong>Purpose:</strong> Calculates both absolute frequency and relative percentage for MalwareDetected status.<br>
                <strong>Output:</strong> Yes/No values with counts and percentages of total.
              </div>
            </div>

            <!-- Bivariate Distribution Example 1 -->
            <div class="sql-container">
              <div class="sql-header">
                <span class="sql-icon">B1</span>
                Bivariate Distribution - Cross-tabulation (Department × MalwareDetected)
              </div>
              <div class="sql-code">
<span class="keyword">TRANSFORM</span> <span class="function">COUNT</span>(UserSecurity.Department) <span class="keyword">AS</span> CountOfRecords
<span class="keyword">SELECT</span> Department
<span class="keyword">FROM</span> UserSecurity
<span class="keyword">GROUP BY</span> Department
<span class="keyword">PIVOT</span> MalwareDetected;
              </div>
              <div class="sql-result">
                <strong>Purpose:</strong> Creates a cross-tabulation showing the relationship between Department and MalwareDetected status.<br>
                <strong>Output:</strong> Matrix with departments as rows and Yes/No malware status as columns, containing frequency counts.
              </div>
            </div>

            <!-- Bivariate Distribution Example 2 -->
            <div class="sql-container">
              <div class="sql-header">
                <span class="sql-icon">B2</span>
                Bivariate Distribution - Contingency Table (Department × SecurityTraining)
              </div>
              <div class="sql-code">
<span class="keyword">SELECT</span> 
    Department,
    <span class="function">SUM</span>(<span class="keyword">IIF</span>(SecurityTraining = <span class="string">'Yes'</span>, 1, 0)) <span class="keyword">AS</span> Trained,
    <span class="function">SUM</span>(<span class="keyword">IIF</span>(SecurityTraining = <span class="string">'No'</span>, 1, 0)) <span class="keyword">AS</span> NotTrained,
    <span class="function">COUNT</span>(*) <span class="keyword">AS</span> Total
<span class="keyword">FROM</span> UserSecurity
<span class="keyword">GROUP BY</span> Department;
              </div>
              <div class="sql-result">
                <strong>Purpose:</strong> Analyzes the joint distribution of Department and SecurityTraining completion status.<br>
                <strong>Output:</strong> Table showing for each department how many employees completed training vs. not completed.
              </div>
            </div>

            <!-- Bivariate Distribution Example 3 -->
            <div class="sql-container">
              <div class="sql-header">
                <span class="sql-icon">B3</span>
                Bivariate Distribution with Aggregation (Department × Avg LoginFailures)
              </div>
              <div class="sql-code">
<span class="keyword">SELECT</span> 
    Department,
    MalwareDetected,
    <span class="function">AVG</span>(LoginFailures) <span class="keyword">AS</span> AvgFailures,
    <span class="function">COUNT</span>(*) <span class="keyword">AS</span> RecordCount
<span class="keyword">FROM</span> UserSecurity
<span class="keyword">GROUP BY</span> Department, MalwareDetected
<span class="keyword">ORDER BY</span> Department, MalwareDetected;
              </div>
              <div class="sql-result">
                <strong>Purpose:</strong> Examines the relationship between Department and MalwareDetected while computing average login failures.<br>
                <strong>Output:</strong> Shows average login failures for each department-malware combination, useful for identifying patterns.
              </div>
            </div>
          </div>

          <div class="explanation" style="margin-top: 1.5rem;">
            <strong>How to use these queries in MS Access:</strong><br>
            1. Open your Access database containing the <code>UserSecurity</code> table<br>
            2. Go to <strong>Create</strong> → <strong>Query Design</strong><br>
            3. Close the "Show Table" dialog<br>
            4. Click <strong>SQL View</strong> button (or View → SQL View)<br>
            5. Copy and paste one of the queries above<br>
            6. Click <strong>Run</strong> (red exclamation mark icon) to execute<br><br>
            <strong>Note:</strong> These queries assume a table named <code>UserSecurity</code> with columns: Department, Age, LoginFailures, MalwareDetected, SecurityTraining. Adjust names if your table/columns differ.
          </div>
        </div>

        <div class="step-container">
          <div class="step-title">
            <span class="step-number">2</span>
            Data Loading
          </div>
          <div class="explanation">
            Load your dataset from MS Access (exported as CSV) or use the sample dataset to begin analysis.
          </div>
          
          <div class="controls-grid">
            <div class="control-group">
              <label for="csvFile">Upload CSV from Access</label>
              <input type="file" id="csvFile" accept=".csv" />
              <div class="btn-group">
                <button class="btn" id="btnLoadSample">Load Sample Dataset</button>
                <button class="btn ghost" id="btnDownloadSample">Download Sample CSV</button>
              </div>
            </div>
            <div class="control-group">
              <label>Dataset Status</label>
              <div id="dataStatus" class="result-box">No data loaded</div>
              <button class="btn secondary" id="btnClearData">Clear Data</button>
            </div>
          </div>
        </div>

        <div class="step-container">
          <div class="step-title">
            <span class="step-number">3</span>
            Univariate Analysis (k ≤ 3)
          </div>
          <div class="explanation">
            Select up to 3 variables to compute their individual frequency distributions. This shows how often each value appears in the dataset.
          </div>
          
          <div class="control-group">
            <label>Select Variables (max 3)</label>
            <div id="varChecklist">Load data first</div>
            <div class="btn-group">
              <button class="btn" id="btnComputeUni" disabled>Compute Univariate Distributions</button>
            </div>
          </div>
          
          <div id="uniResults"></div>
        </div>

        <div class="step-container">
          <div class="step-title">
            <span class="step-number">4</span>
            Bivariate Analysis (Optional)
          </div>
          <div class="explanation">
            Create a cross-tabulation between two variables to examine their relationship. This shows how the combination of values from two variables are distributed.
          </div>
          
          <div class="controls-grid">
            <div class="control-group">
              <label for="biVarX">Variable X</label>
              <select id="biVarX">
                <option value="">-- Select Variable --</option>
              </select>
            </div>
            <div class="control-group">
              <label for="biVarY">Variable Y</label>
              <select id="biVarY">
                <option value="">-- Select Variable --</option>
              </select>
            </div>
          </div>
          <div class="btn-group">
            <button class="btn" id="btnComputeBi" disabled>Generate Cross-tabulation</button>
          </div>
          <div id="biResults"></div>
        </div>
      </div>

      <!-- PART B: Text Analysis & Caesar Cipher -->
      <div class="hw-section">
        <h2 style="color: #18e0e6; margin-bottom: 1.5rem;">Part B — Text Analysis & Caesar Cipher</h2>
        
        <div class="step-container">
          <div class="step-title">
            <span class="step-number">1</span>
            Text Input & Letter Distribution
          </div>
          <div class="explanation">
            Enter text to analyze its letter frequency distribution. This forms the foundation for cryptographic analysis.
          </div>
          
          <div class="control-group">
            <label for="plainText">Input Text</label>
            <textarea id="plainText" rows="4" placeholder="Enter your text here...">The quick brown fox jumps over the lazy dog. This text contains every letter of the alphabet at least once and provides a good sample for frequency analysis.</textarea>
          </div>
          
          <div class="btn-group">
            <button class="btn" id="btnAnalyzeText">Analyze Letter Distribution</button>
            <button class="btn secondary" id="btnClearText">Clear Text</button>
          </div>
          
          <div id="textAnalysisResults"></div>
        </div>

        <div class="step-container">
          <div class="step-title">
            <span class="step-number">2</span>
            Caesar Cipher Encryption
          </div>
          <div class="explanation">
            Apply a Caesar cipher with a specified shift value. Each letter is shifted by a fixed number of positions in the alphabet.
          </div>
          
          <div class="controls-grid">
            <div class="control-group">
              <label for="shift">Shift Value (0-25)</label>
              <input type="number" id="shift" min="0" max="25" value="7"/>
            </div>
            <div class="control-group">
              <div class="btn-group">
                <button class="btn" id="btnEncrypt">Encrypt Text</button>
                <button class="btn ghost" id="btnRandomShift">Random Shift & Encrypt</button>
              </div>
            </div>
          </div>
          
          <div class="control-group">
            <label for="cipherText">Encrypted Text</label>
            <textarea id="cipherText" rows="4" readonly placeholder="Encrypted text will appear here..."></textarea>
          </div>
        </div>

        <div class="step-container">
          <div class="step-title">
            <span class="step-number">3</span>
            Distribution-Based Decryption (Didactic Analysis)
          </div>
          <div class="explanation">
            Compare the letter distributions of the original text and encrypted text to find the correct shift. 
            This method analyzes how the frequency pattern changes and finds the shift that best aligns the distributions.
          </div>
          
          <div class="btn-group">
            <button class="btn" id="btnDistributionDecode">Decode using Distribution Comparison</button>
            <button class="btn secondary" id="btnBruteForce">Brute Force Analysis</button>
          </div>
          
          <div id="distributionAnalysisResults"></div>
          <div id="decryptionResults"></div>
        </div>

        <div class="step-container">
          <div class="step-title">
            <span class="step-number">4</span>
            Results & Verification
          </div>
          <div class="explanation">
            Compare the decrypted text with the original to verify the accuracy of the decryption methods.
          </div>
          <div id="verificationResults"></div>
        </div>
      </div>

      <div class="centered">
        <a href="homework.html" class="btn">← Back to Homework List</a>
      </div>
    </section>
  </main>

  <footer>
    <span>&copy; 2025 Lorenzo Ciafrelli | MS Cybersecurity, Sapienza University of Rome</span>
  </footer>

  <script src="script.js"></script>
  <script src="hw2.js"></script>
</body>
</html>
